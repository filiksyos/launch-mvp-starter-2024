[{"text": "[{\"text\": \"import { NextRequest, NextResponse } from 'next/server';\\nimport Stripe from 'stripe';\\n\\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\\n  apiVersion: '2024-12-18.acacia',\\n});\\n\\nexport async function POST(req: NextRequest) {\\n  try {\\n    const { priceId } = await req.json();\\n\\n    // Create Checkout Sessions from body params.\\n    const session = await stripe.checkout.sessions.create({\\n      line_items: [\\n        {\\n          price: priceId,\\n          quantity: 1,\\n        },\\n      ],\\n      mode: 'subscription',\\n      success_url: `${process.env.NEXT_PUBLIC_APP_URL}/dashboard?success=true`,\\n      cancel_url: `${process.env.NEXT_PUBLIC_APP_URL}/?canceled=true`,\\n    });\\n\\n    return NextResponse.json({ url: session.url });\\n  } catch (err: any) {\\n    return NextResponse.json({ error: err.message }, { status: 500 });\\n  }\\n}\\n\", \"type\": \"text\"}]", "type": "text"}]